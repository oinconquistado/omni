---
title: Database Schemas
description: Detailed schema definitions and relationships
---

# Database Schemas

## Company Database Schema

### User Model
```typescript
model User {
  id        String     @id @default(cuid())
  email     String     @unique
  name      String
  role      UserRole   @default(SUPPORT)
  status    UserStatus @default(ACTIVE)
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt

  sessions Session[]
  createdClients Client[] @relation("ClientCreatedBy")
  updatedClients Client[] @relation("ClientUpdatedBy")
}
```

### Client Model
```typescript
model Client {
  id           String       @id @default(cuid())
  tenantId     String       @unique
  companyName  String
  contactEmail String
  status       ClientStatus @default(TRIAL)
  createdAt    DateTime     @default(now())
  updatedAt    DateTime     @updatedAt
  
  createdById String?
  updatedById String?

  createdBy User? @relation("ClientCreatedBy")
  updatedBy User? @relation("ClientUpdatedBy")
}
```

## Shared Database Schema

### ClientUser Model
```typescript
model ClientUser {
  id        String           @id @default(cuid())
  tenantId  String
  email     String
  name      String
  role      ClientUserRole   @default(SALESPERSON)
  status    ClientUserStatus @default(ACTIVE)
  createdAt DateTime         @default(now())
  updatedAt DateTime         @updatedAt

  sessions ClientSession[]

  @@unique([tenantId, email])
}
```

### Product Model
```typescript
model Product {
  id          String        @id @default(cuid())
  tenantId    String
  sku         String
  name        String
  description String?
  price       Decimal       @db.Decimal(10, 2)
  status      ProductStatus @default(ACTIVE)
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt

  @@unique([tenantId, sku])
}
```

### Stock Model
```typescript
model Stock {
  id            String   @id @default(cuid())
  tenantId      String
  productId     String
  quantity      Int      @default(0)
  reservedQty   Int      @default(0)
  availableQty  Int      @default(0)
  reorderLevel  Int?
  maxStockLevel Int?
  lastUpdated   DateTime @default(now())

  @@unique([tenantId, productId])
}
```